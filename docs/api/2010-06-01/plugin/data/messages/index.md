---
layout: docs
category: docs
---

**Plugin API &raquo; Data**

# Messages #

To add voice, sms, or your own types of voicemail into the OpenVBX Messages system.  

### OpenVBX::addVoiceMessage( _$owner, $guid, $caller, $called, $recording_url, $duration_ )  ###

#### Arguments ####

<table class="parameters">
<thead>
	<tr>
		<th class="col-1">Name</th>
		<th class="col-2">Type</th>
		<th class="col-3">Description</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>$owner</td>
		<td>object</td>
		<td>Object of Owner, can be Group or User</td>
	</tr>
	<tr>
		<td>$guid</td>
		<td>string</td>
		<td>Unique call SID, generated by Call Api provider</td>
	</tr>
	<tr>
		<td>$caller</td>
		<td>phone number</td>
		<td>Number of caller</td>
	</tr>
	<tr>
		<td>$called</td>
		<td>phone number</td>
		<td>Number being called</td>
	</tr>
	<tr>
		<td>$recording_url</td>
		<td>string</td>
		<td>URL of recording</td>
	</tr>
	<tr>
		<td>$duration</td>
		<td>integer</td>
		<td>Length of recording in seconds</td>
	</tr>
</tbody>
</table>

#### Returns ####

 * boolean &mdash; true on success

#### Usage ####

{% highlight php startinline funcnamehighlighting lineanchors tabsize=4 %}
OpenVBX::addVoiceMessage($owner, $guid, $caller, $called, 
                         $recording_url, $duration);
{% endhighlight %}

#### Examples ####

{% highlight php startinline funcnamehighlighting lineanchors tabsize=4 %}
$owner = VBX_User::get(array(
    'id' => 1
));

$guid = $_REQUEST['CallSid'];
$caller = $_REQUEST['Caller'];
$called = $_REQUEST['Called'];
$recording_url = $_REQUEST['RecordingUrl'];
$duration = $_REQUEST['Duration'];

OpenVBX::addVoiceMessage($owner, $guid, $caller, $called, 
                         $recording_url, $duration);
{% endhighlight %}

### OpenVBX::addSMSMessage( _$owner, $guid, $to, $from, $body_ )  ###

#### Arguments ####

<table class="parameters">
<thead>
	<tr>
		<th class="col-1">Name</th>
		<th class="col-2">Type</th>
		<th class="col-3">Description</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>$owner</td>
		<td>object</td>
		<td>Object of Owner, can be Group or User</td>
	</tr>
	<tr>
		<td>$guid</td>
		<td>string</td>
		<td>Unique call SID, generated by Call Api provider</td>
	</tr>
	<tr>
		<td>$to</td>
		<td>phone number</td>
		<td>Number of message recipient</td>
	</tr>
	<tr>
		<td>$from</td>
		<td>phone number</td>
		<td>Number of message sender</td>
	</tr>
	<tr>
		<td>$body</td>
		<td>string</td>
		<td>Body of SMS message</td>
	</tr>
</tbody>
</table>

#### Returns ####

 * boolean &mdash; true on success

#### Usage ####

{% highlight php startinline funcnamehighlighting lineanchors tabsize=4 %}
OpenVBX::addSMSMessage($owner, $guid, $to, $from, $body );
{% endhighlight %}

#### Examples ####

{% highlight php startinline funcnamehighlighting lineanchors tabsize=4 %}
$owner = VBX_User::get(array(
    'id' => 1
));

$guid = $_REQUEST['CallSid'];
$from = $_REQUEST['From'];
$to = $_REQUEST['To'];
$body = $_REQUEST['Body'];

OpenVBX::addSMSMessage($owner, $guid, $to, $from, $body);
{% endhighlight %}

### OpenVBX::addMessage( _$owner, $guid, $caller, $called, $recording_url, $duration, $type = VBX_Message::TYPE_VOICE, $text = null, $notify = false_ )  ###

#### Arguments ####

<table class="parameters">
<thead>
	<tr>
		<th class="col-1">Name</th>
		<th class="col-2">Type</th>
		<th class="col-3">Description</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>$owner</td>
		<td>object</td>
		<td>Object of Owner, can be Group or User</td>
	</tr>
	<tr>
		<td>$guid</td>
		<td>string</td>
		<td>Unique call SID, generated by Call Api provider</td>
	</tr>
	<tr>
		<td>$caller</td>
		<td>phone number</td>
		<td>Number of caller</td>
	</tr>
	<tr>
		<td>$called</td>
		<td>phone number</td>
		<td>Number being called</td>
	</tr>
	<tr>
		<td>$recording_url</td>
		<td>string</td>
		<td>URL of recording</td>
	</tr>
	<tr>
		<td>$duration</td>
		<td>integer</td>
		<td>Length of recording in seconds</td>
	</tr>
	<tr>
		<td>$type</td>
		<td>string, CONSTANT</td>
		<td>String or VBX_Message Type Constant. VBX_Message::TYPE_VOICE, VBX_Message::TYPE_SMS</td>
	</tr>
	<tr>
		<td>$notify</td>
		<td>boolean</td>
		<td>Boolean of whether to email the owner when message is stored</td>
	</tr>
</tbody>
</table>

#### Returns ####

 * boolean &mdash; true on success

#### Usage ####

{% highlight php startinline funcnamehighlighting lineanchors tabsize=4 %}
OpenVBX::addMessage($owner, $guid, $caller, $called, $recording_url, 
                    $duration, VBX_Message::TYPE_SMS, "my sms message", true);
{% endhighlight %}

#### Examples ####

<pre class="brush:php">
$owner = VBX_User::get(array('id' => 1));
$guid = $_REQUEST['CallSid'];
$caller = $_REQUEST['Caller'];
$called = $_REQUEST['Called'];
$body = $_REQUEST['Body'];

OpenVBX::addVoiceMessage($owner, $guid, $caller, $called, null, 
                         null, VBX_Message::TYPE_VOICE, $body, true);
</pre>